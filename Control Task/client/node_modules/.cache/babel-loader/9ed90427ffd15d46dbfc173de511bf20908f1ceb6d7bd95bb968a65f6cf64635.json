{"ast":null,"code":"import _defineProperty from\"C:/Users/Artiem/source/repos/vscode/3 \\u043A\\u0443\\u0440\\u0441/Control Task/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _regeneratorRuntime from\"C:/Users/Artiem/source/repos/vscode/3 \\u043A\\u0443\\u0440\\u0441/Control Task/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Artiem/source/repos/vscode/3 \\u043A\\u0443\\u0440\\u0441/Control Task/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";var _extraReducers;import{createSlice,createAsyncThunk}from'@reduxjs/toolkit';import axios from'../../../utils/axios';var initialState={posts:[],popularPosts:[],loading:false};export var createPost=createAsyncThunk('post/createPost',/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(params){var _yield$axios$post,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post('/posts',params);case 3:_yield$axios$post=_context.sent;data=_yield$axios$post.data;return _context.abrupt(\"return\",data);case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 11:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return function(_x){return _ref.apply(this,arguments);};}());export var getAllPosts=createAsyncThunk('post/getAllPosts',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var _yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get('/posts');case 3:_yield$axios$get=_context2.sent;data=_yield$axios$get.data;return _context2.abrupt(\"return\",data);case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 11:case\"end\":return _context2.stop();}},_callee2,null,[[0,8]]);})));export var postSlice=createSlice({name:'post',initialState:initialState,reducers:{},extraReducers:(_extraReducers={},_defineProperty(_extraReducers,createPost.pending,function(state){state.loading=true;}),_defineProperty(_extraReducers,createPost.fulfilled,function(state,action){state.loading=false;state.posts.push(action.payload);}),_defineProperty(_extraReducers,createPost.rejected,function(state){state.loading=false;}),_defineProperty(_extraReducers,getAllPosts.pending,function(state){state.loading=true;}),_defineProperty(_extraReducers,getAllPosts.fulfilled,function(state,action){state.loading=false;state.posts=action.payload.posts;state.popularPosts=action.payload.popularPosts;}),_defineProperty(_extraReducers,getAllPosts.rejected,function(state){state.loading=false;}),_extraReducers)});export default postSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","initialState","posts","popularPosts","loading","createPost","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","params","_yield$axios$post","data","wrap","_callee$","_context","prev","next","post","sent","abrupt","t0","console","log","stop","_x","apply","arguments","getAllPosts","_callee2","_yield$axios$get","_callee2$","_context2","get","postSlice","name","reducers","extraReducers","_extraReducers","_defineProperty","pending","state","fulfilled","action","push","payload","rejected","reducer"],"sources":["C:/Users/Artiem/source/repos/vscode/3 курс/Control Task/client/src/redux/features/post/postSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit'\r\nimport axios from '../../../utils/axios'\r\n\r\nconst initialState = {\r\n    posts: [],\r\n    popularPosts: [],\r\n    loading: false,\r\n}\r\n\r\nexport const createPost = createAsyncThunk(\r\n    'post/createPost',\r\n    async (params) => {\r\n        try {\r\n            const { data } = await axios.post('/posts', params)\r\n            return data\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n    },\r\n)\r\n\r\n\r\nexport const getAllPosts = createAsyncThunk('post/getAllPosts', async () => {\r\n    try {\r\n        const { data } = await axios.get('/posts')\r\n        return data\r\n    } catch (error) {\r\n        console.log(error)\r\n    }\r\n})\r\n\r\nexport const postSlice = createSlice({\r\n    name: 'post',\r\n    initialState,\r\n    reducers: {},\r\n    extraReducers: {\r\n        [createPost.pending]:(state)=>{\r\n            state.loading = true\r\n        },\r\n        [createPost.fulfilled]:(state, action)=>{\r\n            state.loading = false\r\n            state.posts.push(action.payload)\r\n        },\r\n        [createPost.rejected]:(state)=>{\r\n            state.loading = false\r\n        },\r\n\r\n        ///\r\n        [getAllPosts.pending]: (state) => {\r\n            state.loading = true\r\n        },\r\n        [getAllPosts.fulfilled]: (state, action) => {\r\n            state.loading = false\r\n            state.posts = action.payload.posts\r\n            state.popularPosts = action.payload.popularPosts\r\n        },\r\n        [getAllPosts.rejected]: (state) => {\r\n            state.loading = false\r\n        },\r\n    }\r\n})\r\n\r\nexport default postSlice.reducer\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}